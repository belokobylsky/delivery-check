function init(t){var a,e,r=new ymaps.Map("map",{center:[30.264981955459618,59.9567962610097],zoom:9,controls:[]});new ymaps.SuggestView("search-address-inp");function s(t){a=new ymaps.GeoObject({geometry:{type:"Point"},properties:{iconCaption:"Адрес"}},{preset:"islands#blackDotIconWithCaption",iconCaptionMaxWidth:"215"}),r.geoObjects.add(a),e=ymaps.geoQuery(t).addToMap(r)}function n(){var r=t("#search-address-inp").val();r?ymaps.geocode(r).then(function(r){var s,n=r.geoObjects.get(0);if(n)switch(n.properties.get("metaDataProperty.GeocoderMetaData.precision")){case"exact":break;case"number":case"near":case"range":case"street":s="Уточните номер дома";break;case"other":default:s="Уточните адрес"}else s="Адрес не найден";s?t("#search-address-notice").text(s):function(r){t("#search-address-notice").text(""),t(".cloned-about").each(function(){t(this).remove()});var s=r.geometry.getCoordinates(),n=e.searchContaining(s).get(1)||e.searchContaining(s).get(0);if(a.geometry.setCoordinates(s),n){var o={array:n.properties.get("description").split("; ")};if(o.array.forEach(function(t){var a=t.split("=");o[a[0]]=a[1]}),t(".about-restaurants").removeClass("cannot-be-delivered"),t(".modal-delivery__header").text("Ближайшие к вам рестораны:"),o.multiple){o.address=o.address.split(", "),o.website=o.website.split(", "),t("#about-restaurant-1 .about-restaurant__name").text(o.name),t("#about-restaurant-1 .about-restaurant__address").html("<b>Адрес ресторана:</b> "+o.address[0]),t("#about-restaurant-1 .about-restaurant__website").text("Перейти в меню"),t("#about-restaurant-1 .about-restaurant__website").attr("href",o.website[0]),1==o.zone?(t("#about-restaurant-1 .about-restaurant__price").html("<b>Стоимость доставки:</b> Доставка от 1200 рублей бесплатная (минимальный заказ)."),t("#about-restaurant-1 .about-restaurant__zone").text("Зона - 1")):(t("#about-restaurant-1 .about-restaurant__price").html("<b>Стоимость доставки:</b> Доставка от 1800 рублей бесплатная. При сумме заказа менее 1800 рублей, стоимость доставки 200 рублей."),t("#about-restaurant-1 .about-restaurant__zone").text("Зона - 2"));for(let a=1;a<o.address.length;a++){var u=t("#about-restaurant-1").clone(!0);u.addClass("cloned-about about-"+(a+1)),u.attr("id",""),t(".about-restaurants").append(u),t("#about-restaurant-1 .about-restaurant__website").text("Перейти в меню"),t(".about-"+(a+1)+" .about-restaurant__website").attr("href",o.website[a]),t(".about-"+(a+1)+" .about-restaurant__address").html("<b>Адрес ресторана:</b> "+o.address[a])}}else t("#about-restaurant-1 .about-restaurant__name").text(o.name),t("#about-restaurant-1 .about-restaurant__address").html("<b>Адрес ресторана:</b> "+o.address),t("#about-restaurant-1 .about-restaurant__website").text("Перейти в меню"),t("#about-restaurant-1 .about-restaurant__website").attr("href",o.website),1==o.zone?(t("#about-restaurant-1 .about-restaurant__price").html("<b>Стоимость доставки:</b> Доставка от 1200 рублей бесплатная (минимальный заказ)."),t("#about-restaurant-1 .about-restaurant__zone").text("Зона - 1")):(t("#about-restaurant-1 .about-restaurant__price").html("<b>Стоимость доставки:</b> Доставка от 1800 рублей бесплатная. При сумме заказа менее 1800 рублей, стоимость доставки 200 рублей."),t("#about-restaurant-1 .about-restaurant__zone").text("Зона - 2"))}else t("#about-restaurant-1 .about-restaurant__name").text(""),t("#about-restaurant-1 .about-restaurant__price").text(""),t("#about-restaurant-1 .about-restaurant__zone").text(""),t(".about-restaurants").addClass("cannot-be-delivered"),t(".modal-delivery__header").html("ВЫ НАХОДИТЕСЬ СЛИШКОМ ДАЛЕКО &#9785;"),t("#about-restaurant-1 .about-restaurant__address").text("Данный адрес находится вне зоны нашего обслуживания. Вернитесь на стартовую страницу и выберете другую ресторанную концепцию или закажите спец. доставку по телефону:"),t("#about-restaurant-1 .about-restaurant__website").attr("href","tel:+78126111110"),t("#about-restaurant-1 .about-restaurant__website").text("+7 (812) 611-11-10");t("#about-modal").modal("show")}(n)},function(t){console.log(t)}):t("#search-address-notice").text("Вы ввели пустой запрос")}t.ajax({url:"brasserie-kriek.geojson",dataType:"json",success:function(a){s(a),t("#search-address-submit").bind("click",function(t){n()}),t("#search-address-inp").bind("keydown",function(a){"Enter"==a.key&&t("#search-address-submit").trigger("click")})}}),t(".concept-type").on("change",function(){r.geoObjects.removeAll(),t.ajax({url:t(".concept-type:checked").val()+".geojson",dataType:"json",success:s}),t("#search-address-inp").val()&&n()})}ymaps.ready(function(){init(jQuery)});